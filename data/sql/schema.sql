CREATE TABLE adm_ma_contact (id INT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, tipo_contacto VARCHAR(1) DEFAULT 'J' NOT NULL, id_tipo_identificacion INT, numero_identificacion VARCHAR(128), direccion TEXT, telefonos VARCHAR(255), email VARCHAR(255), exonerado TINYINT DEFAULT '0' NOT NULL, jubilado TINYINT DEFAULT '0' NOT NULL, timestamp DATETIME NOT NULL, INDEX id_tipo_identificacion_idx (id_tipo_identificacion), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_contact_r (id INT AUTO_INCREMENT, id_contacto INT NOT NULL, id_tipo INT NOT NULL, timestamp DATETIME NOT NULL, INDEX id_contacto_idx (id_contacto), INDEX id_tipo_idx (id_tipo), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_contact_t (id INT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, modulo TINYINT NOT NULL, timestamp DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_emp (id INT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, id_tipo_identificacion INT, numero_identificacion VARCHAR(128), id_principal INT, timestamp DATETIME NOT NULL, INDEX id_tipo_identificacion_idx (id_tipo_identificacion), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_emp_users_r (id INT AUTO_INCREMENT, id_empresa INT NOT NULL, id_usuario INT NOT NULL, timestamp DATETIME NOT NULL, INDEX id_empresa_idx (id_empresa), INDEX id_usuario_idx (id_usuario), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_ident_t (id INT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, timestamp DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_items (id INT AUTO_INCREMENT, id_tipo INT NOT NULL, nombre VARCHAR(255) NOT NULL, precio DECIMAL(10, 2) DEFAULT 0.00 NOT NULL, id_impuesto INT NOT NULL, timestamp DATETIME NOT NULL, INDEX id_tipo_idx (id_tipo), INDEX id_impuesto_idx (id_impuesto), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_items_t (id INT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, timestamp DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_tax (id INT AUTO_INCREMENT, nombre VARCHAR(128) NOT NULL, alias VARCHAR(64) NOT NULL, porcentaje DECIMAL(6, 2) DEFAULT 0.00 NOT NULL, timestamp DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_ma_users (id INT AUTO_INCREMENT, username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, id_contacto INT NOT NULL, activo TINYINT DEFAULT '1' NOT NULL, timestamp DATETIME NOT NULL, INDEX id_contacto_idx (id_contacto), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_tr_docs (id INT AUTO_INCREMENT, id_empresa INT NOT NULL, id_tipo INT NOT NULL, numero_documento VARCHAR(128), id_contacto INT NOT NULL, fecha_emision DATE NOT NULL, fecha_vencimiento DATE NOT NULL, monto_exento DECIMAL(10, 2) DEFAULT 0.00 NOT NULL, monto_grabado DECIMAL(10, 2) DEFAULT 0.00 NOT NULL, monto_impuesto DECIMAL(10, 2) DEFAULT 0.00 NOT NULL, monto_descuento DECIMAL(10, 2) DEFAULT 0.00 NOT NULL, comentarios TEXT, timestamp DATETIME NOT NULL, INDEX id_tipo_idx (id_tipo), INDEX id_empresa_idx (id_empresa), INDEX id_contacto_idx (id_contacto), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_tr_docs_detalle_r (id INT AUTO_INCREMENT, id_documento INT NOT NULL, id_items INT NOT NULL, descripcion TEXT NOT NULL, cantidad DECIMAL(10, 3) DEFAULT 0.000 NOT NULL, costo DECIMAL(10, 2) DEFAULT 0.00 NOT NULL, precio DECIMAL(10, 2) DEFAULT 0.00 NOT NULL, monto_impuesto DECIMAL(10, 2) DEFAULT 0.00 NOT NULL, alias_impuesto VARCHAR(128), timestamp DATETIME NOT NULL, INDEX id_documento_idx (id_documento), INDEX id_items_idx (id_items), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_tr_docs_fiscal_r (id INT AUTO_INCREMENT, id_documento INT NOT NULL, serial_equipo VARCHAR(128) NOT NULL, reimpresion TINYINT DEFAULT '0' NOT NULL, numero_comprobante VARCHAR(128) NOT NULL, timestamp DATETIME NOT NULL, INDEX id_documento_idx (id_documento), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE adm_tr_docs_t (id INT AUTO_INCREMENT, nombre VARCHAR(100) NOT NULL, modulo INT NOT NULL, origen VARCHAR(50), tipo_fiscal TINYINT DEFAULT '0' NOT NULL, afecta_cuentas TINYINT DEFAULT '0' NOT NULL, signo_cuentas VARCHAR(1) DEFAULT '+' NOT NULL, contiene_renglones TINYINT DEFAULT '0' NOT NULL, afecta_inventario TINYINT DEFAULT '0' NOT NULL, reserva_inventario TINYINT DEFAULT '0' NOT NULL, signo_inventario VARCHAR(1) DEFAULT '+' NOT NULL, id_cuenta INT, timestamp DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE adm_ma_contact ADD CONSTRAINT adm_ma_contact_id_tipo_identificacion_adm_ma_ident_t_id FOREIGN KEY (id_tipo_identificacion) REFERENCES adm_ma_ident_t(id);
ALTER TABLE adm_ma_contact_r ADD CONSTRAINT adm_ma_contact_r_id_tipo_adm_ma_contact_t_id FOREIGN KEY (id_tipo) REFERENCES adm_ma_contact_t(id);
ALTER TABLE adm_ma_contact_r ADD CONSTRAINT adm_ma_contact_r_id_contacto_adm_ma_contact_id FOREIGN KEY (id_contacto) REFERENCES adm_ma_contact(id);
ALTER TABLE adm_ma_emp ADD CONSTRAINT adm_ma_emp_id_tipo_identificacion_adm_ma_ident_t_id FOREIGN KEY (id_tipo_identificacion) REFERENCES adm_ma_ident_t(id);
ALTER TABLE adm_ma_emp_users_r ADD CONSTRAINT adm_ma_emp_users_r_id_usuario_adm_ma_users_id FOREIGN KEY (id_usuario) REFERENCES adm_ma_users(id);
ALTER TABLE adm_ma_emp_users_r ADD CONSTRAINT adm_ma_emp_users_r_id_empresa_adm_ma_emp_id FOREIGN KEY (id_empresa) REFERENCES adm_ma_emp(id);
ALTER TABLE adm_ma_items ADD CONSTRAINT adm_ma_items_id_tipo_adm_ma_items_t_id FOREIGN KEY (id_tipo) REFERENCES adm_ma_items_t(id);
ALTER TABLE adm_ma_items ADD CONSTRAINT adm_ma_items_id_impuesto_adm_ma_tax_id FOREIGN KEY (id_impuesto) REFERENCES adm_ma_tax(id);
ALTER TABLE adm_ma_users ADD CONSTRAINT adm_ma_users_id_contacto_adm_ma_contact_id FOREIGN KEY (id_contacto) REFERENCES adm_ma_contact(id);
ALTER TABLE adm_tr_docs ADD CONSTRAINT adm_tr_docs_id_tipo_adm_tr_docs_t_id FOREIGN KEY (id_tipo) REFERENCES adm_tr_docs_t(id);
ALTER TABLE adm_tr_docs ADD CONSTRAINT adm_tr_docs_id_empresa_adm_ma_emp_id FOREIGN KEY (id_empresa) REFERENCES adm_ma_emp(id);
ALTER TABLE adm_tr_docs ADD CONSTRAINT adm_tr_docs_id_contacto_adm_ma_contact_id FOREIGN KEY (id_contacto) REFERENCES adm_ma_contact(id);
ALTER TABLE adm_tr_docs_detalle_r ADD CONSTRAINT adm_tr_docs_detalle_r_id_items_adm_ma_items_id FOREIGN KEY (id_items) REFERENCES adm_ma_items(id);
ALTER TABLE adm_tr_docs_detalle_r ADD CONSTRAINT adm_tr_docs_detalle_r_id_documento_adm_tr_docs_id FOREIGN KEY (id_documento) REFERENCES adm_tr_docs(id);
ALTER TABLE adm_tr_docs_fiscal_r ADD CONSTRAINT adm_tr_docs_fiscal_r_id_documento_adm_tr_docs_id FOREIGN KEY (id_documento) REFERENCES adm_tr_docs(id);
